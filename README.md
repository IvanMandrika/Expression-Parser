
# Парсер выражений на Clojure

## Описание
Этот проект реализует парсер математических выражений на языке программирования Clojure. В проекте используются **рекурсивный** и **комбинаторный парсеры** для обработки выражений. Поддерживаются различные операции, включая арифметические, средние значения и более сложные вычисления. 

Программа предоставляет два основных интерфейса:
1. **Функциональные выражения**.
2. **Объектные выражения**.

## Возможности
- **Арифметические операции**: сложение, вычитание, умножение, деление.
- **Средние значения**:
  - Арифметическое (`arithMean`).
  - Геометрическое (`geomMean`).
  - Гармоническое (`harmMean`).
- **Поддержка унарных операций**, таких как `negate`, `sin`, `cos`.
- **Поддержка объектного подхода**:
  - Методы для работы с выражениями: `evaluate`, `toString`, `toStringInfix`, `diff`.
- **Рекурсивный и комбинаторный парсеры** для обработки выражений.

## Основные функции

### `parseFunction`
Преобразует строковое представление выражения в функциональное выражение. Поддерживает операции, описанные в `map-of-functions`.

Пример:
```clojure
(def expr (parseFunction "(+ x (* y 2))"))
(expr {'x 3, 'y 4}) ; => 11
```

### `parseObject`
Преобразует строковое представление выражения в объектное выражение. Поддерживает операции, описанные в `map-of-objects`.

Пример:
```clojure
(def expr (parseObject "(+ x (* y 2))"))
(evaluate expr {'x 3, 'y 4}) ; => 11
(toString expr) ; => "(+ x (* y 2))"
```

### `parseObjectInfix`
Использует комбинаторный парсер для обработки выражений в инфиксной записи.

Пример:
```clojure
(def expr (parseObjectInfix "x + y * 2"))
(evaluate expr {'x 3, 'y 4}) ; => 11
```

## Использование


### Определение переменных и функций
Пример использования математических операций:
```clojure
(def expr (Add (Variable "x") (Multiply (Variable "y") (Constant 2))))
(evaluate expr {'x 3, 'y 4}) ; => 11
```

### Дифференцирование
Пример получения производной:
```clojure
(def expr (Multiply (Variable "x") (Variable "x")))
(diff expr "x") ; => "(+ x x)"
```

## Требования
- Clojure 1.10+.
- Подключение файлов `libs/proto.clj` и `libs/parser.clj`.

## Структура проекта
```
libs/
  ├── proto.clj    ; Реализация прототипов и базовых методов
  ├── parser.clj   ; Парсер и вспомогательные функции
expression.clj      ; Основной файл программы
.gitignore          ; Исключения для Git
README.md           ; Документация
```

## Запуск
1. Установите Clojure.
2. Загрузите необходимые файлы:
   ```clojure
   (load-file "libs/proto.clj")
   (load-file "libs/parser.clj")
   (load-file "expression.clj")
   ```
3. Используйте функции `parseFunction`, `parseObject` или `parseObjectInfix` для работы с выражениями.
